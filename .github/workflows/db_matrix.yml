name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run some build step
        run: |
          # Simulate a build step
          echo "Running build step..."
          # Simulate a failure
          exit 1

  notify:
    runs-on: ubuntu-latest
    needs: build
    if: failure()

    steps:
      - name: Send email notification
        uses: mikepenz/action-mail@v1
        with:
          # SMTP server configuration
          from: 'meenalgoyal02@gmail.com'
          to: 'meenal.goyal@nagarro.com'
          subject: 'GitHub Actions Job Failed'
          body: 'The GitHub Actions job failed. Please check the logs for more details.'
          server_address: 'smtp.gmail.com'
          server_port: 587
          username: 'meenalgoyal02@gmail.com'
          password: ${{ secrets.SMTP_PASSWORD }}
          secure: true
